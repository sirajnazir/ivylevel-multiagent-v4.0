**E v2.0 — FINAL CONTRIBUTOR RULESET (WIRED TO YOUR PROJECT NAME: `ivylevel-multiagents-v4`)**.

This is the *absolute guardrail* foundation.
No AI coding agent touches a single .ts file without obeying EVERY one of these laws.

Save this EXACT document as:

```
/docs/contributors/Contributor_Ruleset_v2.0.md
```

It will become the Supreme Court of your v4 repo.

---

# ⭐ **IVYLEVEL v4.0 — FINAL CONTRIBUTOR RULESET v2.0**

**Project Root:** `ivylevel-multiagents-v4`
**Document ID:** IVL-RULES-02
**Scope:** All humans + AI coding agents (Claude, Cursor, GPT, Copilot)
**Purpose:** Prevent codebase corruption, duplication, entropy, unreviewed rewrites, and architectural drift.

This is the **mandatory, enforced constitution** for the entire v4.0 multi-agent platform.

Violating any rule results in immediate PR rejection and regeneration.

---

# 1. PROJECT ROOT AND FOLDER BOUNDARIES (IMMUTABLE)

### Valid root-level directories inside `ivylevel-multiagents-v4`:

```
/apps
/packages
/infra
/scripts
/docs
/tests
```

### ❌ Forbidden root directories:

* `/new/`
* `/runtime2/`
* `/tmp/`
* `/experiments/`
* `/sandbox/`
* `/drafts/`
* `/playground/`
* `/samples/`
* `/archive/`
* `/z/`
* Anything autogenerated without explicit request.

Any agent attempting to create these triggers PR rejection.

---

# 2. FILE NAMING RULES (STRICT)

### ✔ Valid file naming:

* TypeScript: `lowerCamelCase.ts`
* Class files: `PascalCase.ts`
* Markdown: `kebab-case.md`
* Test files: `*.test.ts`

### ❌ Forbidden naming:

* `index copy.ts`
* `runtime-final2.ts`
* `temp.ts`
* `schema_new.ts`
* Any file ending in `copy`, `backup`, `tmp`, `final`, `final-final2`, or numeric suffixes beyond version numbers.

If a file name already exists anywhere in the repo, creation is rejected.

---

# 3. NO DUPLICATE FILES (CRITICAL RULE)

Before creating ANY file, the AI must search the repo.

### ✔ Allowed:

One unique authoritative version of every module.

### ❌ Forbidden:

* Duplicate filenames in different folders
* Duplicate logic blocks
* Recreating schema files
* Recreating helpers under different path names

If duplication is detected → **reject and abort**.

---

# 4. SCHEMA GOVERNANCE RULES (SINGLE SOURCE OF TRUTH)

All schemas MUST live only in:

```
/packages/schema
```

### ✔ Required:

* Every schema has a version (e.g. `Assessment_v1.ts`)
* Every schema change must include a version bump
* Every schema must update `/packages/schema/changelog.md`

### ❌ Forbidden:

* Inline JSON definitions inside code
* Creating schema-like interfaces in agent code
* Silent schema modifications
* Adding fields without version bump

Schemas rule the platform. Nothing overrides them.

---

# 5. ORACLES LAYER PROTECTION (v3 BRIDGE SAFETY)

### ✔ Oracles live ONLY in:

```
/packages/adapters/v3-intelligence-oracles/
```

### ✔ Oracles may:

* Read from v3 logic
* Map outputs to v4 schemas
* Validate types

### ❌ Oracles may NOT:

* Modify v3 logic
* Rewrite v3 scoring
* Patch v3 functions
* Add new intelligence logic
* Change meaning of v3 outputs

v3 logic is read-only.
Adapters are thin wrappers, not rewrites.

---

# 6. PR SIZE LIMITS (TO STOP AI MELTDOWNS)

### Permitted maximums:

* **500 lines changed per PR**
* **10 files modified**
* **1 domain boundary touched**

Examples:

* touching `/packages` and `/apps` in the SAME PR = ❌ forbidden
* touching only `/packages/schema` = ✔ allowed
* touching >10 files = ❌ forbidden

Large refactors require explicit human approval in writing.

---

# 7. IMPLEMENTATION ORDER (MANDATORY)

Claude and other agents MUST follow this order:

### 1. Folder structure creation

### 2. Spec file creation (docs/specs)

### 3. Empty schema files

### 4. Oracle adapters (empty stubs)

### 5. Runtime skeleton

### 6. Core logic utilities

### 7. Agent state machines

### 8. Tools & evaluators

### 9. UI/CLI integration

Skipping steps or generating logic before schemas = **automatic rejection**.

---

# 8. ALLOWED AND FORBIDDEN ACTIONS FOR AI AGENTS

### ✔ AI MAY:

* Create files ONLY in approved folders
* Modify code only when directly instructed
* Implement ONLY the specific file requested
* Ask before adding new subfolders
* Always reference the spec being implemented
* Use the schemas folder as the single source
* Keep code minimal and pure

### ❌ AI MAY NOT:

* Autogenerate additional helpers
* Move files unless instructed
* Rename directories
* Modify v3 logic
* Modify infra, CI/CD
* Create migrations unless explicitly asked
* Alter code outside the currently requested task
* Expand scope of implementation without approval
* Generate multiple files when asked for one

---

# 9. CODING STANDARDS (APPLIED TO ALL AI-GENERATED CODE)

### ✔ Required:

* TypeScript strict mode
* Pure functions preferred
* No shared mutable state
* No global side effects
* Proper import hygiene
* Clear comments on all exported functions
* Follow domain architecture boundaries

### ❌ Forbidden:

* Mixing concerns across packages
* Copy-paste logic
* Large utility files (>300 lines)
* Circular dependencies

---

# 10. TESTING REQUIREMENTS (MANDATED)

For every new file:

### ✔ Must include:

* a unit test file
* integration test stub
* schema validation test (if applicable)

### ✔ Golden files:

All oracle outputs must have golden snapshots under:

```
/tests/oracles/goldens/
```

Changes require:

* version bump
* changelog entry
* human approval

---

# 11. DOCUMENTATION REQUIREMENTS

### ✔ Every new module must include:

* README.md
* inline documentation
* link to the relevant spec

### ✔ Every code change must update:

* changelog
* any affected docs under `/docs/architecture`

### ❌ Forbidden:

* silent structural changes
* undocumented flows
* undocumented exports

---

# 12. RESTRICTED AREAS

AI must NOT touch:

* `/infra/deploy/`
* `/infra/docker/`
* `/infra/config/`
* CI/CD workflows under `.github/workflows`
* Production keys
* Database connection config
* v3 intelligence logic

If any modification attempt is made → PR rejected.

---

# 13. CONTRIBUTOR CHECKLIST (AI MUST SELF-CHECK BEFORE SUBMITTING)

Before submitting code, the agent must confirm:

* Folder is valid
* File is unique
* Schema exists
* Spec exists
* Only ONE file modified unless pre-approved
* Naming follows standards
* No unrequested helpers created
* Code references correct v4 imports
* All tests added
* No mutation of v3 logic
* No new folders outside the architecture map

---

# 14. ENFORCEMENT POLICY

Violations trigger:

1. Immediate PR rejection
2. Deletion of offending files
3. Revocation of agent write permissions
4. Regenerate code under stricter instructions
5. Human review before retry

No exceptions.

---

# ⭐ **Contributor Ruleset v2.0 COMPLETE**

This is now compatible with your root directory name:

> **`ivylevel-multiagents-v4`**

and fully aligned with the v4.0 architecture, folders, and Oracles layer.

---